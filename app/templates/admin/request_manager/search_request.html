{% extends "admin/request_manager/layouts/base.html" %}
{% import 'macros/form_macros.html' as f %}

{% block request_content %}


<div class="content-section">
  <form method="POST" action="">
    {{ form.hidden_tag() }}

    <h2 class="header">Search Criteria</h2>
    <hr />

    {% set flashes = {
    'error': get_flashed_messages(category_filter=['form-error']),
    'warning': get_flashed_messages(category_filter=['form-check-email']),
    'info': get_flashed_messages(category_filter=['form-info']),
    'success': get_flashed_messages(category_filter=['form-success'])
    } %}

    {{ f.begin_form(form, flashes) }}

    <div class="ui form">
      <!--Dropdown components-->
      <div class="ui two column stackable grid">
        <div class="six wide column">
          <!--Javascript to implement Select All (in progress)-->
          <script type="text/javascript">
          $("select").on("click", function(){      
            if ($(this).find(":selected").text() == "Select All"){
              if ($(this).attr("data-select") == "false")
                $(this).attr("data-select", "true").find("option").prop("selected", true);
              else
                $(this).attr("data-select", "false").find("option").prop("selected", false);
            }
          });
          </script>
          <div class="dropdown">
            <div class="field">
              <label> {{form.request_type.label}}</label>
              {{ form.request_type(size=5, class='form-control', multiple="multiple") }}
            </div>
            <div class="field">
              <label> {{form.request_status.label}}</label>
              {{ form.request_status(size=7, class='form-control', multiple="multiple") }}
            </div>
          </div>
        </div>

        <div class="right floated six wide column">
          <div class="field">
            <label> {{form.service_category.label}}</label>
            {{ form.service_category(size=9, class='form-control', multiple="multiple") }}
          </div>
          <div class="field">
            <label> {{form.provider_type.label}}</label>
            {{ form.provider_type(size=4, class='form-control', multiple="multiple") }}
          </div>
        </div>
      </div>
      <script type="text/javascript">
        $(document).ready(function(){
          $('.ui.dropdown') .dropdown({ fullTextSearch: true });
        });
      </script>
      <div class="field">
        <label> {{form.requesting_member.label}}</label>        
        <select class="ui search selection dropdown" id="search-select">
          <option value="">Type Name Here</option>
          {% for choice in form.requesting_member.choices %}
          <option value={{ choice[0] }}>{{choice[1]}}</option>
          {% endfor %}
        </select>
      </div>
      <div class="field">
        <label> {{form.service_provider.label}}</label>
        <select class="ui search dropdown">
          <option value="">Type Name Here</option>
          {% for choice in form.service_provider.choices %}
          <option value={{ choice[0] }}>{{choice[1]}}</option>
          {% endfor %}
        </select>
      </div>
    </div>
    <p><hr /></p>

    <div class="ui form">
      <div class="ui two column stackable grid">
        <div class="six wide column">
          <!--Put Calendar here-->


        </div>
        <div class="right floated six wide column">
          <div class="inline fields">
            <label>{{ form.show.label }}:</label>
            {% for subfield in form.show %}
            <tr>
                <td>{{ subfield }}</td>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <td>{{ subfield.label }}</td>
            </tr>
            {% endfor %}        
          </div>
          <div class = "field">
            <label>{{ form.time_period.label }}</label>
            <select class="ui dropdown">
              <option value="">Nothing Selected</option>
              {% for choice in form.time_period.choices %}
              <option value={{ choice[0] }}>{{choice[1]}}</option>
              {% endfor %}
            </select>
          </div> 
          <div class="inline fields">
            <div>
              <label>{{ form.start_date.label }}:</label>
              {{form.start_date}}
            </div>
            <div>
              <label>{{form.end_date.label}}:</label> 
              {{form.end_date}}
            </div>
          </div>
        </div>
      </div>
    </div>

    <p><hr /></p>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <div class = "ui form">
      <div class = "ui centered grid">
      <div class="inline fields">
        <div>{{form.apply_filters}}</div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div>{{form.reset_filters}}</div>
      </div>
    </div>

    </div>


    <!-- <div class="right floated six wide column">
          <select class="ui search dropdown">
            <div class="field">
              <label> {{form.requesting_member.label}}</label>
              {{form.requesting_member}}
            </div>
          </select>
        </div>
      </div> -->

    <!-- <div class="ui two column stackable grid">
        <div class="left floated six wide column">
          <select class="ui search dropdown">
            <div class="field">
              <label> {{form.service_provider.label}}</label>
              {{form.service_provider}}
            </div>
          </select>
        </div>
      </div> -->
</div>
</form>
</div>
{% endblock %}